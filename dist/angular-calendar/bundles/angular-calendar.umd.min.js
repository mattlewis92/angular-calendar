!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("positioning"),require("rxjs"),require("rxjs/operators"),require("calendar-utils"),require("angular-draggable-droppable"),require("@angular/animations"),require("angular-resizable-element")):"function"==typeof define&&define.amd?define("angular-calendar",["exports","@angular/core","@angular/common","positioning","rxjs","rxjs/operators","calendar-utils","angular-draggable-droppable","@angular/animations","angular-resizable-element"],t):t((e=e||self)["angular-calendar"]={},e.ng.core,e.ng.common,e.positioning,e.rxjs,e.rxjs.operators,e.calendarUtils,e["angular-draggable-droppable"],e.ng.animations,e["angular-resizable-element"])}(this,(function(e,t,n,a,o,i,r,l,d,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function y(e,t,n,a){var o,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(i<3?o(r):i>3?o(t,n,r):o(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}function u(e,t){return function(n,a){t(n,a,e)}}function v(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)r.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}var h,f=function(){function e(){this.trackByActionId=function(e,t){return t.id?t.id:t}}return y([t.Input(),v("design:type",Object)],e.prototype,"event",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),e=y([t.Component({selector:"mwl-calendar-event-actions",template:'\n    <ng-template\n      #defaultTemplate\n      let-event="event"\n      let-trackByActionId="trackByActionId"\n    >\n      <span *ngIf="event.actions" class="cal-event-actions">\n        <a\n          class="cal-event-action"\n          href="javascript:;"\n          *ngFor="let action of event.actions; trackBy: trackByActionId"\n          (mwlClick)="action.onClick({ event: event, sourceEvent: $event })"\n          (mwlKeydownEnter)="\n            action.onClick({ event: event, sourceEvent: $event })\n          "\n          [ngClass]="action.cssClass"\n          [innerHtml]="action.label"\n          tabindex="0"\n          role="button"\n          [attr.aria-label]="\n            { action: action } | calendarA11y: \'actionButtonLabel\'\n          "\n        >\n        </a>\n      </span>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        event: event,\n        trackByActionId: trackByActionId\n      }"\n    >\n    </ng-template>\n  '})],e)}(),D=function(){function e(){}return y([t.Input(),v("design:type",Object)],e.prototype,"event",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Input(),v("design:type",String)],e.prototype,"view",void 0),e=y([t.Component({selector:"mwl-calendar-event-title",template:'\n    <ng-template #defaultTemplate let-event="event" let-view="view">\n      <span\n        class="cal-event-title"\n        [innerHTML]="event.title | calendarEventTitle: view:event"\n        [attr.aria-hidden]="{} | calendarA11y: \'hideEventTitle\'"\n      >\n      </span>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        event: event,\n        view: view\n      }"\n    >\n    </ng-template>\n  '})],e)}(),w=function(){function e(){}return y([t.Input(),v("design:type",String)],e.prototype,"contents",void 0),y([t.Input(),v("design:type",String)],e.prototype,"placement",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"event",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),e=y([t.Component({selector:"mwl-calendar-tooltip-window",template:'\n    <ng-template\n      #defaultTemplate\n      let-contents="contents"\n      let-placement="placement"\n      let-event="event"\n    >\n      <div class="cal-tooltip" [ngClass]="\'cal-tooltip-\' + placement">\n        <div class="cal-tooltip-arrow"></div>\n        <div class="cal-tooltip-inner" [innerHtml]="contents"></div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        contents: contents,\n        placement: placement,\n        event: event\n      }"\n    >\n    </ng-template>\n  '})],e)}(),E=function(){function e(e,t,n,a,i,r){this.elementRef=e,this.injector=t,this.renderer=n,this.viewContainerRef=i,this.document=r,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new o.Subject,this.tooltipFactory=a.resolveComponentFactory(w)}return e.prototype.ngOnChanges=function(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck())},e.prototype.ngOnDestroy=function(){this.hide()},e.prototype.onMouseOver=function(){var e=this;(null===this.delay?o.of("now"):o.timer(this.delay)).pipe(i.takeUntil(this.cancelTooltipDelay$)).subscribe((function(){e.show()}))},e.prototype.onMouseOut=function(){this.hide()},e.prototype.show=function(){var e=this;!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame((function(){e.positionTooltip()})))},e.prototype.hide=function(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()},e.prototype.positionTooltip=function(e){void 0===e&&(e=[]),this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=a.positionElements(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===e.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip(g(e,[this.tooltipRef.instance.placement])))},e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Injector},{type:t.Renderer2},{type:t.ComponentFactoryResolver},{type:t.ViewContainerRef},{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]},y([t.Input("mwlCalendarTooltip"),v("design:type",String)],e.prototype,"contents",void 0),y([t.Input("tooltipPlacement"),v("design:type",Object)],e.prototype,"placement",void 0),y([t.Input("tooltipTemplate"),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Input("tooltipEvent"),v("design:type",Object)],e.prototype,"event",void 0),y([t.Input("tooltipAppendToBody"),v("design:type",Boolean)],e.prototype,"appendToBody",void 0),y([t.Input("tooltipDelay"),v("design:type",Number)],e.prototype,"delay",void 0),y([t.HostListener("mouseenter"),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],e.prototype,"onMouseOver",null),y([t.HostListener("mouseleave"),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],e.prototype,"onMouseOut",null),e=y([t.Directive({selector:"[mwlCalendarTooltip]"}),u(5,t.Inject(n.DOCUMENT)),v("design:paramtypes",[t.ElementRef,t.Injector,t.Renderer2,t.ComponentFactoryResolver,t.ViewContainerRef,Object])],e)}(),k=function(){};(h=e.CalendarView||(e.CalendarView={})).Month="month",h.Week="week",h.Day="day";var T=function(e){return r.validateEvents(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,g(["angular-calendar"],e))}))};function C(e,t){return Math.floor(e.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(e.right)&&Math.floor(e.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(e.right)&&Math.floor(e.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(e.bottom)&&Math.floor(e.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(e.bottom)}function b(e,t){return Math.round(e/t)*t}var I=function(e,t){return t.id?t.id:t},S=function(e,t){return t.date.toISOString()},O=function(e,t){return t.date.toISOString()},M=function(e,t){return t.segments[0].date.toISOString()},A=function(e,t){return t.event.id?t.event.id:t.event},R=function(e,t){return t.event.id?t.event.id:t.event},H=60;function B(e,t){return H/(e*t)}function x(e,t,n,a){return b(e,a||n)*B(t,n)}function W(e,t,n){return t.end?t.end:e.addMinutes(t.start,n)}function z(e,t,n,a){for(var o=0,i=0,r=n<0?e.subDays:e.addDays,l=t;i<=Math.abs(n);){l=r(t,o);var d=e.getDay(l);-1===a.indexOf(d)&&i++,o++}return l}function j(e,t,n,a,o){void 0===a&&(a=[]);for(var i=o?e.startOfDay(t):e.startOfWeek(t,{weekStartsOn:n}),r=e.endOfWeek(t,{weekStartsOn:n});a.indexOf(e.getDay(i))>-1&&i<r;)i=e.addDays(i,1);if(o)return{viewStart:i,viewEnd:l=e.endOfDay(z(e,i,o-1,a))};for(var l=r;a.indexOf(e.getDay(l))>-1&&l>i;)l=e.subDays(l,1);return{viewStart:i,viewEnd:l}}function P(e){var t=e.x,n=e.y;return Math.abs(t)>1||Math.abs(n)>1}var V,F=function(){function n(e){this.dateAdapter=e,this.excludeDays=[],this.viewDateChange=new t.EventEmitter}return n.prototype.onClick=function(){var t={day:this.dateAdapter.subDays,week:this.dateAdapter.subWeeks,month:this.dateAdapter.subMonths}[this.view];this.view===e.CalendarView.Day?this.viewDateChange.emit(z(this.dateAdapter,this.viewDate,-1,this.excludeDays)):this.view===e.CalendarView.Week&&this.daysInWeek?this.viewDateChange.emit(z(this.dateAdapter,this.viewDate,-this.daysInWeek,this.excludeDays)):this.viewDateChange.emit(t(this.viewDate,1))},n.ctorParameters=function(){return[{type:k}]},y([t.Input(),v("design:type",String)],n.prototype,"view",void 0),y([t.Input(),v("design:type",Date)],n.prototype,"viewDate",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"excludeDays",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"daysInWeek",void 0),y([t.Output(),v("design:type",t.EventEmitter)],n.prototype,"viewDateChange",void 0),y([t.HostListener("click"),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],n.prototype,"onClick",null),n=y([t.Directive({selector:"[mwlCalendarPreviousView]"}),v("design:paramtypes",[k])],n)}(),N=function(){function n(e){this.dateAdapter=e,this.excludeDays=[],this.viewDateChange=new t.EventEmitter}return n.prototype.onClick=function(){var t={day:this.dateAdapter.addDays,week:this.dateAdapter.addWeeks,month:this.dateAdapter.addMonths}[this.view];this.view===e.CalendarView.Day?this.viewDateChange.emit(z(this.dateAdapter,this.viewDate,1,this.excludeDays)):this.view===e.CalendarView.Week&&this.daysInWeek?this.viewDateChange.emit(z(this.dateAdapter,this.viewDate,this.daysInWeek,this.excludeDays)):this.viewDateChange.emit(t(this.viewDate,1))},n.ctorParameters=function(){return[{type:k}]},y([t.Input(),v("design:type",String)],n.prototype,"view",void 0),y([t.Input(),v("design:type",Date)],n.prototype,"viewDate",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"excludeDays",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"daysInWeek",void 0),y([t.Output(),v("design:type",t.EventEmitter)],n.prototype,"viewDateChange",void 0),y([t.HostListener("click"),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],n.prototype,"onClick",null),n=y([t.Directive({selector:"[mwlCalendarNextView]"}),v("design:paramtypes",[k])],n)}(),L=function(){function e(e){this.dateAdapter=e,this.viewDateChange=new t.EventEmitter}return e.prototype.onClick=function(){this.viewDateChange.emit(this.dateAdapter.startOfDay(new Date))},e.ctorParameters=function(){return[{type:k}]},y([t.Input(),v("design:type",Date)],e.prototype,"viewDate",void 0),y([t.Output(),v("design:type",t.EventEmitter)],e.prototype,"viewDateChange",void 0),y([t.HostListener("click"),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],e.prototype,"onClick",null),e=y([t.Directive({selector:"[mwlCalendarToday]"}),v("design:paramtypes",[k])],e)}(),$=function(){function e(e){this.dateAdapter=e}return e.prototype.monthViewColumnHeader=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"EEEE",a)},e.prototype.monthViewDayNumber=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"d",a)},e.prototype.monthViewTitle=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"LLLL y",a)},e.prototype.weekViewColumnHeader=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"EEEE",a)},e.prototype.weekViewColumnSubHeader=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"MMM d",a)},e.prototype.weekViewTitle=function(e){var t=e.date,a=e.locale,o=e.weekStartsOn,i=e.excludeDays,r=e.daysInWeek,l=j(this.dateAdapter,t,o,i,r),d=l.viewStart,s=l.viewEnd,p=function(e,t){return n.formatDate(e,"MMM d"+(t?", yyyy":""),a)};return p(d,d.getUTCFullYear()!==s.getUTCFullYear())+" - "+p(s,!0)},e.prototype.weekViewHour=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"h a",a)},e.prototype.dayViewHour=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"h a",a)},e.prototype.dayViewTitle=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"EEEE, MMMM d, y",a)},e.ctorParameters=function(){return[{type:k}]},e=y([t.Injectable(),v("design:paramtypes",[k])],e)}(),Y=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n=y([t.Injectable()],n)}($),_=function(){function e(e,t){this.dateFormatter=e,this.locale=t}return e.prototype.transform=function(e,t,n,a,o,i){if(void 0===n&&(n=this.locale),void 0===a&&(a=0),void 0===o&&(o=[]),void 0===this.dateFormatter[t]){var r=Object.getOwnPropertyNames(Object.getPrototypeOf(Y.prototype)).filter((function(e){return"constructor"!==e}));throw new Error(t+" is not a valid date formatter. Can only be one of "+r.join(", "))}return this.dateFormatter[t]({date:e,locale:n,weekStartsOn:a,excludeDays:o,daysInWeek:i})},e.ctorParameters=function(){return[{type:Y},{type:String,decorators:[{type:t.Inject,args:[t.LOCALE_ID]}]}]},e=y([t.Pipe({name:"calendarDate"}),u(1,t.Inject(t.LOCALE_ID)),v("design:paramtypes",[Y,String])],e)}(),U=function(){function e(){}return e.prototype.month=function(e,t){return e.title},e.prototype.monthTooltip=function(e,t){return e.title},e.prototype.week=function(e,t){return e.title},e.prototype.weekTooltip=function(e,t){return e.title},e.prototype.day=function(e,t){return e.title},e.prototype.dayTooltip=function(e,t){return e.title},e}(),q=function(){function e(e){this.calendarEventTitle=e}return e.prototype.transform=function(e,t,n){return this.calendarEventTitle[t](n,e)},e.ctorParameters=function(){return[{type:U}]},e=y([t.Pipe({name:"calendarEventTitle"}),v("design:paramtypes",[U])],e)}(),K=function(){function e(e,n,a){this.renderer=e,this.elm=n,this.document=a,this.clickListenerDisabled=!1,this.click=new t.EventEmitter,this.destroy$=new o.Subject}return e.prototype.ngOnInit=function(){var e=this;this.clickListenerDisabled||this.listen().pipe(i.takeUntil(this.destroy$)).subscribe((function(t){t.stopPropagation(),e.click.emit(t)}))},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.listen=function(){var e=this;return new o.Observable((function(t){return e.renderer.listen(e.elm.nativeElement,"click",(function(e){t.next(e)}))}))},e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]},y([t.Input(),v("design:type",Object)],e.prototype,"clickListenerDisabled",void 0),y([t.Output("mwlClick"),v("design:type",Object)],e.prototype,"click",void 0),e=y([t.Directive({selector:"[mwlClick]"}),u(2,t.Inject(n.DOCUMENT)),v("design:paramtypes",[t.Renderer2,t.ElementRef,Object])],e)}(),G=function(){function e(){this.keydown=new t.EventEmitter}return e.prototype.onKeyPress=function(e){13!==e.keyCode&&13!==e.which&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.keydown.emit(e))},y([t.Output("mwlKeydownEnter"),v("design:type",Object)],e.prototype,"keydown",void 0),y([t.HostListener("keydown",["$event"]),v("design:type",Function),v("design:paramtypes",[KeyboardEvent]),v("design:returntype",void 0)],e.prototype,"onKeyPress",null),e=y([t.Directive({selector:"[mwlKeydownEnter]"})],e)}(),Z=function(){function e(e){this.dateAdapter=e}return e.prototype.getMonthView=function(e){return r.getMonthView(this.dateAdapter,e)},e.prototype.getWeekViewHeader=function(e){return r.getWeekViewHeader(this.dateAdapter,e)},e.prototype.getWeekView=function(e){return r.getWeekView(this.dateAdapter,e)},e.ctorParameters=function(){return[{type:k}]},e=y([t.Injectable(),v("design:paramtypes",[k])],e)}(),J=function(){function e(e){this.i18nPlural=e}return e.prototype.monthCell=function(e){var t=e.day,a=e.locale;return t.badgeTotal>0?"\n        "+n.formatDate(t.date,"EEEE MMMM d",a)+",\n        "+this.i18nPlural.transform(t.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})+",\n         click to expand\n      ":""+n.formatDate(t.date,"EEEE MMMM d",a)},e.prototype.openDayEventsLandmark=function(e){var t=e.date,a=e.locale;return"\n      Beginning of expanded view for "+n.formatDate(t,"EEEE MMMM dd",a)+"\n    "},e.prototype.openDayEventsAlert=function(e){var t=e.date,a=e.locale;return n.formatDate(t,"EEEE MMMM dd",a)+" expanded"},e.prototype.eventDescription=function(e){var t=e.event,a=e.locale;if(!0===t.allDay)return this.allDayEventDescription({event:t,locale:a});var o="\n      "+n.formatDate(t.start,"EEEE MMMM dd",a)+",\n      "+t.title+", from "+n.formatDate(t.start,"hh:mm a",a)+"\n    ";return t.end?o+" to "+n.formatDate(t.end,"hh:mm a",a):o},e.prototype.allDayEventDescription=function(e){var t=e.event,a=e.locale,o="\n      "+t.title+", event spans multiple days:\n      start time "+n.formatDate(t.start,"MMMM dd hh:mm a",a)+"\n    ";return t.end?o+", stop time "+n.formatDate(t.end,"MMMM d hh:mm a",a):o+", no stop time"},e.prototype.actionButtonLabel=function(e){return e.action.a11yLabel},e.prototype.monthCellTabIndex=function(){return 0},e.prototype.hideMonthCellEvents=function(){return!0},e.prototype.hideEventTitle=function(){return!0},e.prototype.hideWeekHourSegment=function(){return!0},e.prototype.hideDayHourSegment=function(){return!0},e.ctorParameters=function(){return[{type:n.I18nPluralPipe}]},e=y([t.Injectable(),v("design:paramtypes",[n.I18nPluralPipe])],e)}(),Q=function(){function e(e,t){this.calendarA11y=e,this.locale=t}return e.prototype.transform=function(e,t){if(e.locale=e.locale||this.locale,void 0===this.calendarA11y[t]){var n=Object.getOwnPropertyNames(Object.getPrototypeOf(J.prototype)).filter((function(e){return"constructor"!==e}));throw new Error(t+" is not a valid a11y method. Can only be one of "+n.join(", "))}return this.calendarA11y[t](e)},e.ctorParameters=function(){return[{type:J},{type:String,decorators:[{type:t.Inject,args:[t.LOCALE_ID]}]}]},e=y([t.Pipe({name:"calendarA11y"}),u(1,t.Inject(t.LOCALE_ID)),v("design:paramtypes",[J,String])],e)}(),X=new t.InjectionToken("Moment"),ee=function(){function e(e,t){this.moment=e,this.dateAdapter=t}return e.prototype.monthViewColumnHeader=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("dddd")},e.prototype.monthViewDayNumber=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("D")},e.prototype.monthViewTitle=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("MMMM YYYY")},e.prototype.weekViewColumnHeader=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("dddd")},e.prototype.weekViewColumnSubHeader=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("MMM D")},e.prototype.weekViewTitle=function(e){var t=this,n=e.date,a=e.locale,o=e.weekStartsOn,i=e.excludeDays,r=e.daysInWeek,l=j(this.dateAdapter,n,o,i,r),d=l.viewStart,s=l.viewEnd,p=function(e,n){return t.moment(e).locale(a).format("MMM D"+(n?", YYYY":""))};return p(d,d.getUTCFullYear()!==s.getUTCFullYear())+" - "+p(s,!0)},e.prototype.weekViewHour=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("ha")},e.prototype.dayViewHour=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("ha")},e.prototype.dayViewTitle=function(e){var t=e.date,n=e.locale;return this.moment(t).locale(n).format("dddd, D MMMM, YYYY")},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[X]}]},{type:k}]},e=y([t.Injectable(),u(0,t.Inject(X)),v("design:paramtypes",[Object,k])],e)}(),te=function(){function e(e){this.dateAdapter=e}return e.prototype.monthViewColumnHeader=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{weekday:"long"}).format(t)},e.prototype.monthViewDayNumber=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{day:"numeric"}).format(t)},e.prototype.monthViewTitle=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{year:"numeric",month:"long"}).format(t)},e.prototype.weekViewColumnHeader=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{weekday:"long"}).format(t)},e.prototype.weekViewColumnSubHeader=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{day:"numeric",month:"short"}).format(t)},e.prototype.weekViewTitle=function(e){var t=e.date,n=e.locale,a=e.weekStartsOn,o=e.excludeDays,i=e.daysInWeek,r=j(this.dateAdapter,t,a,o,i),l=r.viewStart,d=r.viewEnd,s=function(e,t){return new Intl.DateTimeFormat(n,{day:"numeric",month:"short",year:t?"numeric":void 0}).format(e)};return s(l,l.getUTCFullYear()!==d.getUTCFullYear())+" - "+s(d,!0)},e.prototype.weekViewHour=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{hour:"numeric"}).format(t)},e.prototype.dayViewHour=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{hour:"numeric"}).format(t)},e.prototype.dayViewTitle=function(e){var t=e.date,n=e.locale;return new Intl.DateTimeFormat(n,{day:"numeric",month:"long",year:"numeric",weekday:"long"}).format(t)},e.ctorParameters=function(){return[{type:k}]},e=y([t.Injectable(),v("design:paramtypes",[k])],e)}();(V=e.CalendarEventTimesChangedEventType||(e.CalendarEventTimesChangedEventType={})).Drag="drag",V.Drop="drop",V.Resize="resize";var ne=function(){function e(){}var a;return a=e,e.forRoot=function(e,t){return void 0===t&&(t={}),{ngModule:a,providers:[e,t.eventTitleFormatter||U,t.dateFormatter||Y,t.utils||Z,t.a11y||J]}},e=a=y([t.NgModule({declarations:[f,D,w,E,F,N,L,_,q,Q,K,G],imports:[n.CommonModule],exports:[f,D,w,E,F,N,L,_,q,Q,K,G],providers:[n.I18nPluralPipe],entryComponents:[w]})],e)}(),ae=function(){function n(e,n,a,o){var i=this;this.cdr=e,this.utils=n,this.dateAdapter=o,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new t.EventEmitter,this.dayClicked=new t.EventEmitter,this.eventClicked=new t.EventEmitter,this.columnHeaderClicked=new t.EventEmitter,this.eventTimesChanged=new t.EventEmitter,this.trackByRowOffset=function(e,t){return i.view.days.slice(t,i.view.totalDaysVisibleInWeek).map((function(e){return e.date.toISOString()})).join("-")},this.trackByDate=function(e,t){return t.date.toISOString()},this.locale=a}return n.prototype.ngOnInit=function(){var e=this;this.refresh&&(this.refreshSubscription=this.refresh.subscribe((function(){e.refreshAll(),e.cdr.markForCheck()})))},n.prototype.ngOnChanges=function(e){var t=e.viewDate||e.excludeDays||e.weekendDays,n=e.viewDate||e.events||e.excludeDays||e.weekendDays;t&&this.refreshHeader(),e.events&&T(this.events),n&&this.refreshBody(),(t||n)&&this.emitBeforeViewRender(),(e.activeDayIsOpen||e.viewDate||e.events||e.excludeDays||e.activeDay)&&this.checkActiveDayIsOpen()},n.prototype.ngOnDestroy=function(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()},n.prototype.toggleDayHighlight=function(e,t){this.view.days.forEach((function(n){t&&n.events.indexOf(e)>-1?n.backgroundColor=e.color&&e.color.secondary||"#D1E8FF":delete n.backgroundColor}))},n.prototype.eventDropped=function(t,n,a){if(t!==a){var o=this.dateAdapter.getYear(t.date),i=this.dateAdapter.getMonth(t.date),r=this.dateAdapter.getDate(t.date),l=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(n.start,o),i),r),d=void 0;if(n.end){var s=this.dateAdapter.differenceInSeconds(l,n.start);d=this.dateAdapter.addSeconds(n.end,s)}this.eventTimesChanged.emit({event:n,newStart:l,newEnd:d,day:t,type:e.CalendarEventTimesChangedEventType.Drop})}},n.prototype.refreshHeader=function(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})},n.prototype.refreshBody=function(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})},n.prototype.checkActiveDayIsOpen=function(){var e=this;if(!0===this.activeDayIsOpen){var t=this.activeDay||this.viewDate;this.openDay=this.view.days.find((function(n){return e.dateAdapter.isSameDay(n.date,t)}));var n=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(n/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null},n.prototype.refreshAll=function(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()},n.prototype.emitBeforeViewRender=function(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})},n.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:Z},{type:String,decorators:[{type:t.Inject,args:[t.LOCALE_ID]}]},{type:k}]},y([t.Input(),v("design:type",Date)],n.prototype,"viewDate",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"events",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"excludeDays",void 0),y([t.Input(),v("design:type",Boolean)],n.prototype,"activeDayIsOpen",void 0),y([t.Input(),v("design:type",Date)],n.prototype,"activeDay",void 0),y([t.Input(),v("design:type",o.Subject)],n.prototype,"refresh",void 0),y([t.Input(),v("design:type",String)],n.prototype,"locale",void 0),y([t.Input(),v("design:type",Object)],n.prototype,"tooltipPlacement",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"tooltipTemplate",void 0),y([t.Input(),v("design:type",Boolean)],n.prototype,"tooltipAppendToBody",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"tooltipDelay",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"weekStartsOn",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"headerTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"cellTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"openDayEventsTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"eventTitleTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"eventActionsTemplate",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"weekendDays",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"beforeViewRender",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"dayClicked",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"eventClicked",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"columnHeaderClicked",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"eventTimesChanged",void 0),n=y([t.Component({selector:"mwl-calendar-month-view",template:'\n    <div class="cal-month-view" role="grid">\n      <mwl-calendar-month-view-header\n        [days]="columnHeaders"\n        [locale]="locale"\n        (columnHeaderClicked)="columnHeaderClicked.emit($event)"\n        [customTemplate]="headerTemplate"\n      >\n      </mwl-calendar-month-view-header>\n      <div class="cal-days">\n        <div\n          *ngFor="let rowIndex of view.rowOffsets; trackBy: trackByRowOffset"\n        >\n          <div class="cal-cell-row">\n            <mwl-calendar-month-cell\n              *ngFor="\n                let day of view.days\n                  | slice: rowIndex:rowIndex + view.totalDaysVisibleInWeek;\n                trackBy: trackByDate\n              "\n              [ngClass]="day?.cssClass"\n              [day]="day"\n              [openDay]="openDay"\n              [locale]="locale"\n              [tooltipPlacement]="tooltipPlacement"\n              [tooltipAppendToBody]="tooltipAppendToBody"\n              [tooltipTemplate]="tooltipTemplate"\n              [tooltipDelay]="tooltipDelay"\n              [customTemplate]="cellTemplate"\n              [ngStyle]="{ backgroundColor: day.backgroundColor }"\n              (mwlClick)="dayClicked.emit({ day: day, sourceEvent: $event })"\n              [clickListenerDisabled]="dayClicked.observers.length === 0"\n              (mwlKeydownEnter)="\n                dayClicked.emit({ day: day, sourceEvent: $event })\n              "\n              (highlightDay)="toggleDayHighlight($event.event, true)"\n              (unhighlightDay)="toggleDayHighlight($event.event, false)"\n              mwlDroppable\n              dragOverClass="cal-drag-over"\n              (drop)="\n                eventDropped(\n                  day,\n                  $event.dropData.event,\n                  $event.dropData.draggedFrom\n                )\n              "\n              (eventClicked)="\n                eventClicked.emit({\n                  event: $event.event,\n                  sourceEvent: $event.sourceEvent\n                })\n              "\n              [attr.tabindex]="{} | calendarA11y: \'monthCellTabIndex\'"\n            >\n            </mwl-calendar-month-cell>\n          </div>\n          <mwl-calendar-open-day-events\n            [locale]="locale"\n            [isOpen]="openRowIndex === rowIndex"\n            [events]="openDay?.events"\n            [date]="openDay?.date"\n            [customTemplate]="openDayEventsTemplate"\n            [eventTitleTemplate]="eventTitleTemplate"\n            [eventActionsTemplate]="eventActionsTemplate"\n            (eventClicked)="\n              eventClicked.emit({\n                event: $event.event,\n                sourceEvent: $event.sourceEvent\n              })\n            "\n            mwlDroppable\n            dragOverClass="cal-drag-over"\n            (drop)="\n              eventDropped(\n                openDay,\n                $event.dropData.event,\n                $event.dropData.draggedFrom\n              )\n            "\n          >\n          </mwl-calendar-open-day-events>\n        </div>\n      </div>\n    </div>\n  '}),u(2,t.Inject(t.LOCALE_ID)),v("design:paramtypes",[t.ChangeDetectorRef,Z,String,k])],n)}(),oe=function(){function e(){this.columnHeaderClicked=new t.EventEmitter,this.trackByWeekDayHeaderDate=S}return y([t.Input(),v("design:type",Array)],e.prototype,"days",void 0),y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"columnHeaderClicked",void 0),e=y([t.Component({selector:"mwl-calendar-month-view-header",template:'\n    <ng-template\n      #defaultTemplate\n      let-days="days"\n      let-locale="locale"\n      let-trackByWeekDayHeaderDate="trackByWeekDayHeaderDate"\n    >\n      <div class="cal-cell-row cal-header" role="row">\n        <div\n          class="cal-cell"\n          *ngFor="let day of days; trackBy: trackByWeekDayHeaderDate"\n          [class.cal-past]="day.isPast"\n          [class.cal-today]="day.isToday"\n          [class.cal-future]="day.isFuture"\n          [class.cal-weekend]="day.isWeekend"\n          (click)="\n            columnHeaderClicked.emit({\n              isoDayNumber: day.day,\n              sourceEvent: $event\n            })\n          "\n          [ngClass]="day.cssClass"\n          tabindex="0"\n          role="columnheader"\n        >\n          {{ day.date | calendarDate: \'monthViewColumnHeader\':locale }}\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        days: days,\n        locale: locale,\n        trackByWeekDayHeaderDate: trackByWeekDayHeaderDate\n      }"\n    >\n    </ng-template>\n  '})],e)}(),ie=function(){function e(){this.highlightDay=new t.EventEmitter,this.unhighlightDay=new t.EventEmitter,this.eventClicked=new t.EventEmitter,this.trackByEventId=I,this.validateDrag=P}return y([t.Input(),v("design:type",Object)],e.prototype,"day",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"openDay",void 0),y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"tooltipPlacement",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"tooltipAppendToBody",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"tooltipTemplate",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"tooltipDelay",void 0),y([t.Output(),v("design:type",t.EventEmitter)],e.prototype,"highlightDay",void 0),y([t.Output(),v("design:type",t.EventEmitter)],e.prototype,"unhighlightDay",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"eventClicked",void 0),e=y([t.Component({selector:"mwl-calendar-month-cell",template:'\n    <ng-template\n      #defaultTemplate\n      let-day="day"\n      let-openDay="openDay"\n      let-locale="locale"\n      let-tooltipPlacement="tooltipPlacement"\n      let-highlightDay="highlightDay"\n      let-unhighlightDay="unhighlightDay"\n      let-eventClicked="eventClicked"\n      let-tooltipTemplate="tooltipTemplate"\n      let-tooltipAppendToBody="tooltipAppendToBody"\n      let-tooltipDelay="tooltipDelay"\n      let-trackByEventId="trackByEventId"\n      let-validateDrag="validateDrag"\n    >\n      <div\n        class="cal-cell-top"\n        [attr.aria-label]="\n          { day: day, locale: locale } | calendarA11y: \'monthCell\'\n        "\n      >\n        <span aria-hidden="true">\n          <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{\n            day.badgeTotal\n          }}</span>\n          <span class="cal-day-number">{{\n            day.date | calendarDate: \'monthViewDayNumber\':locale\n          }}</span>\n        </span>\n      </div>\n      <div class="cal-events" *ngIf="day.events.length > 0">\n        <div\n          class="cal-event"\n          *ngFor="let event of day.events; trackBy: trackByEventId"\n          [ngStyle]="{ backgroundColor: event.color?.primary }"\n          [ngClass]="event?.cssClass"\n          (mouseenter)="highlightDay.emit({ event: event })"\n          (mouseleave)="unhighlightDay.emit({ event: event })"\n          [mwlCalendarTooltip]="\n            event.title | calendarEventTitle: \'monthTooltip\':event\n          "\n          [tooltipPlacement]="tooltipPlacement"\n          [tooltipEvent]="event"\n          [tooltipTemplate]="tooltipTemplate"\n          [tooltipAppendToBody]="tooltipAppendToBody"\n          [tooltipDelay]="tooltipDelay"\n          mwlDraggable\n          [class.cal-draggable]="event.draggable"\n          dragActiveClass="cal-drag-active"\n          [dropData]="{ event: event, draggedFrom: day }"\n          [dragAxis]="{ x: event.draggable, y: event.draggable }"\n          [validateDrag]="validateDrag"\n          (mwlClick)="eventClicked.emit({ event: event, sourceEvent: $event })"\n          [attr.aria-hidden]="{} | calendarA11y: \'hideMonthCellEvents\'"\n        ></div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        day: day,\n        openDay: openDay,\n        locale: locale,\n        tooltipPlacement: tooltipPlacement,\n        highlightDay: highlightDay,\n        unhighlightDay: unhighlightDay,\n        eventClicked: eventClicked,\n        tooltipTemplate: tooltipTemplate,\n        tooltipAppendToBody: tooltipAppendToBody,\n        tooltipDelay: tooltipDelay,\n        trackByEventId: trackByEventId,\n        validateDrag: validateDrag\n      }"\n    >\n    </ng-template>\n  ',host:{class:"cal-cell cal-day-cell","[class.cal-past]":"day.isPast","[class.cal-today]":"day.isToday","[class.cal-future]":"day.isFuture","[class.cal-weekend]":"day.isWeekend","[class.cal-in-month]":"day.inMonth","[class.cal-out-month]":"!day.inMonth","[class.cal-has-events]":"day.events.length > 0","[class.cal-open]":"day === openDay","[class.cal-event-highlight]":"!!day.backgroundColor"}})],e)}(),re=d.trigger("collapse",[d.state("void",d.style({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),d.state("*",d.style({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),d.transition("* => void",d.animate("150ms ease-out")),d.transition("void => *",d.animate("150ms ease-in"))]),le=function(){function e(){this.isOpen=!1,this.eventClicked=new t.EventEmitter,this.trackByEventId=I,this.validateDrag=P}return y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"isOpen",void 0),y([t.Input(),v("design:type",Array)],e.prototype,"events",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventTitleTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventActionsTemplate",void 0),y([t.Input(),v("design:type",Date)],e.prototype,"date",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"eventClicked",void 0),e=y([t.Component({selector:"mwl-calendar-open-day-events",template:'\n    <ng-template\n      #defaultTemplate\n      let-events="events"\n      let-eventClicked="eventClicked"\n      let-isOpen="isOpen"\n      let-trackByEventId="trackByEventId"\n      let-validateDrag="validateDrag"\n    >\n      <div\n        class="cal-open-day-events"\n        [@collapse]\n        *ngIf="isOpen"\n        role="application"\n      >\n        <span\n          tabindex="-1"\n          role="alert"\n          [attr.aria-label]="\n            { date: date, locale: locale } | calendarA11y: \'openDayEventsAlert\'\n          "\n        ></span>\n        <span\n          tabindex="0"\n          role="landmark"\n          [attr.aria-label]="\n            { date: date, locale: locale }\n              | calendarA11y: \'openDayEventsLandmark\'\n          "\n        ></span>\n        <div\n          *ngFor="let event of events; trackBy: trackByEventId"\n          [ngClass]="event?.cssClass"\n          mwlDraggable\n          [class.cal-draggable]="event.draggable"\n          dragActiveClass="cal-drag-active"\n          [dropData]="{ event: event }"\n          [dragAxis]="{ x: event.draggable, y: event.draggable }"\n          [validateDrag]="validateDrag"\n        >\n          <span\n            class="cal-event"\n            [ngStyle]="{ backgroundColor: event.color?.primary }"\n          >\n          </span>\n          &ngsp;\n          <mwl-calendar-event-title\n            [event]="event"\n            [customTemplate]="eventTitleTemplate"\n            view="month"\n            (mwlClick)="\n              eventClicked.emit({ event: event, sourceEvent: $event })\n            "\n            (mwlKeydownEnter)="\n              eventClicked.emit({ event: event, sourceEvent: $event })\n            "\n            tabindex="0"\n            [attr.aria-label]="\n              { event: event, locale: locale }\n                | calendarA11y: \'eventDescription\'\n            "\n          >\n          </mwl-calendar-event-title>\n          &ngsp;\n          <mwl-calendar-event-actions\n            [event]="event"\n            [customTemplate]="eventActionsTemplate"\n          >\n          </mwl-calendar-event-actions>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        events: events,\n        eventClicked: eventClicked,\n        isOpen: isOpen,\n        trackByEventId: trackByEventId,\n        validateDrag: validateDrag\n      }"\n    >\n    </ng-template>\n  ',animations:[re]})],e)}(),de=function(){function e(){}return e=y([t.NgModule({imports:[n.CommonModule,l.DragAndDropModule,ne],declarations:[ae,ie,le,oe],exports:[l.DragAndDropModule,ae,ie,le,oe]})],e)}(),se=function(){function e(e,t){this.dragContainerElement=e,this.startPosition=t.getBoundingClientRect()}return e.prototype.validateDrag=function(e){var t=e.x,n=e.y,a=e.snapDraggedEvents,o=e.dragAlreadyMoved,i=e.transform;if(a){var r=Object.assign({},this.startPosition,{left:this.startPosition.left+i.x,right:this.startPosition.right+i.x,top:this.startPosition.top+i.y,bottom:this.startPosition.bottom+i.y});return(P({x:t,y:n})||o)&&C(this.dragContainerElement.getBoundingClientRect(),r)}return P({x:t,y:n})||o},e}(),pe=function(){function e(e,t){this.resizeContainerElement=e,this.minWidth=t}return e.prototype.validateResize=function(e){var t=e.rectangle;return!(this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth))&&C(this.resizeContainerElement.getBoundingClientRect(),t)},e}(),ce=function(){function n(e,n,a,o){this.cdr=e,this.utils=n,this.dateAdapter=o,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new t.EventEmitter,this.eventClicked=new t.EventEmitter,this.eventTimesChanged=new t.EventEmitter,this.beforeViewRender=new t.EventEmitter,this.hourSegmentClicked=new t.EventEmitter,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.trackByWeekDayHeaderDate=S,this.trackByHourSegment=O,this.trackByHour=M,this.trackByWeekAllDayEvent=A,this.trackByWeekTimeEvent=R,this.trackByHourColumn=function(e,t){return t.hours[0]?t.hours[0].segments[0].date.toISOString():t},this.trackById=function(e,t){return t.id},this.locale=a}return n.prototype.ngOnInit=function(){var e=this;this.refresh&&(this.refreshSubscription=this.refresh.subscribe((function(){e.refreshAll(),e.cdr.markForCheck()})))},n.prototype.ngOnChanges=function(e){var t=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,n=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek;t&&this.refreshHeader(),e.events&&T(this.events),n&&this.refreshBody(),(t||n)&&this.emitBeforeViewRender()},n.prototype.ngOnDestroy=function(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()},n.prototype.resizeStarted=function(e,t){this.dayColumnWidth=this.getDayColumnWidth(e);var n=new pe(e,t);this.validateResize=function(e){var t=e.rectangle;return n.validateResize({rectangle:t})},this.cdr.markForCheck()},n.prototype.timeEventResizeStarted=function(e,t,n){this.timeEventResizes.set(t.event,n),this.resizeStarted(e)},n.prototype.timeEventResizing=function(e,t){var n=this;this.timeEventResizes.set(e.event,t);var a=new Map,o=g(this.events);this.timeEventResizes.forEach((function(e,t){var i=n.getTimeEventResizedDates(t,e),r=c({},t,i);a.set(r,t);var l=o.indexOf(t);o[l]=r})),this.restoreOriginalEvents(o,a)},n.prototype.timeEventResizeEnded=function(t){this.view=this.getWeekView(this.events);var n=this.timeEventResizes.get(t.event);if(n){this.timeEventResizes.delete(t.event);var a=this.getTimeEventResizedDates(t.event,n);this.eventTimesChanged.emit({newStart:a.start,newEnd:a.end,event:t.event,type:e.CalendarEventTimesChangedEventType.Resize})}},n.prototype.allDayEventResizeStarted=function(e,t,n){this.allDayEventResizes.set(t,{originalOffset:t.offset,originalSpan:t.span,edge:void 0!==n.edges.left?"left":"right"}),this.resizeStarted(e,this.getDayColumnWidth(e))},n.prototype.allDayEventResizing=function(e,t,n){var a=this.allDayEventResizes.get(e);if(void 0!==t.edges.left){var o=Math.round(+t.edges.left/n);e.offset=a.originalOffset+o,e.span=a.originalSpan-o}else if(void 0!==t.edges.right){o=Math.round(+t.edges.right/n);e.span=a.originalSpan+o}},n.prototype.allDayEventResizeEnded=function(t){var n=this.allDayEventResizes.get(t);if(n){var a="left"===n.edge,o=void 0;o=a?t.offset-n.originalOffset:t.span-n.originalSpan,t.offset=n.originalOffset,t.span=n.originalSpan;var i=t.event.start,r=t.event.end||t.event.start;a?i=z(this.dateAdapter,i,o,this.excludeDays):r=z(this.dateAdapter,r,o,this.excludeDays),this.eventTimesChanged.emit({newStart:i,newEnd:r,event:t.event,type:e.CalendarEventTimesChangedEventType.Resize}),this.allDayEventResizes.delete(t)}},n.prototype.getDayColumnWidth=function(e){return Math.floor(e.offsetWidth/this.days.length)},n.prototype.dateDragEnter=function(e){this.lastDragEnterDate=e},n.prototype.eventDropped=function(t,n,a){(function(e,t,n,a){return e.dropData&&e.dropData.event&&(e.dropData.calendarId!==a||e.dropData.event.allDay&&!n||!e.dropData.event.allDay&&n)})(t,0,a,this.calendarId)&&this.lastDragEnterDate.getTime()===n.getTime()&&this.eventTimesChanged.emit({type:e.CalendarEventTimesChangedEventType.Drop,event:t.dropData.event,newStart:n,allDay:a})},n.prototype.dragEnter=function(e){this.eventDragEnterByType[e]++},n.prototype.dragLeave=function(e){this.eventDragEnterByType[e]--},n.prototype.dragStarted=function(e,t,n){var a=this;this.dayColumnWidth=this.getDayColumnWidth(e);var o=new se(e,t);this.validateDrag=function(e){var t=e.x,n=e.y,i=e.transform;return 0===a.allDayEventResizes.size&&0===a.timeEventResizes.size&&o.validateDrag({x:t,y:n,snapDraggedEvents:a.snapDraggedEvents,dragAlreadyMoved:a.dragAlreadyMoved,transform:i})},this.dragActive=!0,this.dragAlreadyMoved=!1,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&n&&this.view.hourColumns.forEach((function(e){var t=e.events.find((function(e){return e.event===n.event&&e!==n}));t&&(t.width=0,t.height=0)})),this.cdr.markForCheck()},n.prototype.dragMove=function(e,t){if(this.snapDraggedEvents){var n=this.getDragMovedEventTimes(e,t,this.dayColumnWidth,!0),a=e.event,o=c({},a,n),i=this.events.map((function(e){return e===a?o:e}));this.restoreOriginalEvents(i,new Map([[o,a]]))}this.dragAlreadyMoved=!0},n.prototype.allDayEventDragMove=function(){this.dragAlreadyMoved=!0},n.prototype.dragEnded=function(t,n,a,o){void 0===o&&(o=!1),this.view=this.getWeekView(this.events),this.dragActive=!1;var i=this.getDragMovedEventTimes(t,n,a,o),r=i.start,l=i.end;this.eventDragEnterByType[o?"time":"allDay"]>0&&function(e,t,n){var a=t||e;return n.start<=e&&e<=n.end||n.start<=a&&a<=n.end}(r,l,this.view.period)&&this.eventTimesChanged.emit({newStart:r,newEnd:l,event:t.event,type:e.CalendarEventTimesChangedEventType.Drag,allDay:!o})},n.prototype.refreshHeader=function(){this.days=this.utils.getWeekViewHeader(c({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays},j(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))},n.prototype.refreshBody=function(){this.view=this.getWeekView(this.events)},n.prototype.refreshAll=function(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()},n.prototype.emitBeforeViewRender=function(){this.days&&this.view&&this.beforeViewRender.emit(c({header:this.days},this.view))},n.prototype.getWeekView=function(e){return this.utils.getWeekView(c({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays},j(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))},n.prototype.getDragMovedEventTimes=function(e,t,n,a){var o,i=b(t.x,n)/n,r=a?x(t.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize):0,l=this.dateAdapter.addMinutes(z(this.dateAdapter,e.event.start,i,this.excludeDays),r);return e.event.end&&(o=this.dateAdapter.addMinutes(z(this.dateAdapter,e.event.end,i,this.excludeDays),r)),{start:l,end:o}},n.prototype.restoreOriginalEvents=function(e,t){var n=this.view;this.view=this.getWeekView(e);var a=e.filter((function(e){return t.has(e)}));this.view.hourColumns.forEach((function(e,o){n.hourColumns[o].hours.forEach((function(t,n){t.segments.forEach((function(t,a){e.hours[n].segments[a].cssClass=t.cssClass}))})),a.forEach((function(n){var a=t.get(n),o=e.events.find((function(e){return e.event===n}));o?o.event=a:e.events.push({event:a,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1})}))})),t.clear()},n.prototype.getTimeEventResizedDates=function(e,t){var n,a,o=(n=this.hourSegments,a=this.hourSegmentHeight,B(n,a)*a),i={start:e.start,end:W(this.dateAdapter,e,o)},r=(e.end,function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["end"])),l={start:this.dateAdapter.addMinutes(i.end,-1*o),end:W(this.dateAdapter,r,o)};if(void 0!==t.edges.left){var d=Math.round(+t.edges.left/this.dayColumnWidth),s=z(this.dateAdapter,i.start,d,this.excludeDays);i.start=s<l.start?s:l.start}else if(void 0!==t.edges.right){d=Math.round(+t.edges.right/this.dayColumnWidth);var p=z(this.dateAdapter,i.end,d,this.excludeDays);i.end=p>l.end?p:l.end}if(void 0!==t.edges.top){var c=x(t.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize);s=this.dateAdapter.addMinutes(i.start,c);i.start=s<l.start?s:l.start}else if(void 0!==t.edges.bottom){c=x(t.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize),p=this.dateAdapter.addMinutes(i.end,c);i.end=p>l.end?p:l.end}return i},n.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:Z},{type:String,decorators:[{type:t.Inject,args:[t.LOCALE_ID]}]},{type:k}]},y([t.Input(),v("design:type",Date)],n.prototype,"viewDate",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"events",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"excludeDays",void 0),y([t.Input(),v("design:type",o.Subject)],n.prototype,"refresh",void 0),y([t.Input(),v("design:type",String)],n.prototype,"locale",void 0),y([t.Input(),v("design:type",Object)],n.prototype,"tooltipPlacement",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"tooltipTemplate",void 0),y([t.Input(),v("design:type",Boolean)],n.prototype,"tooltipAppendToBody",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"tooltipDelay",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"weekStartsOn",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"headerTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"eventTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"eventTitleTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"eventActionsTemplate",void 0),y([t.Input(),v("design:type",String)],n.prototype,"precision",void 0),y([t.Input(),v("design:type",Array)],n.prototype,"weekendDays",void 0),y([t.Input(),v("design:type",Boolean)],n.prototype,"snapDraggedEvents",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"hourSegments",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"hourSegmentHeight",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"dayStartHour",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"dayStartMinute",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"dayEndHour",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"dayEndMinute",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"hourSegmentTemplate",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"eventSnapSize",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"allDayEventsLabelTemplate",void 0),y([t.Input(),v("design:type",Number)],n.prototype,"daysInWeek",void 0),y([t.Input(),v("design:type",t.TemplateRef)],n.prototype,"currentTimeMarkerTemplate",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"dayHeaderClicked",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"eventClicked",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"eventTimesChanged",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"beforeViewRender",void 0),y([t.Output(),v("design:type",Object)],n.prototype,"hourSegmentClicked",void 0),n=y([t.Component({selector:"mwl-calendar-week-view",template:'\n    <div class="cal-week-view" role="grid">\n      <mwl-calendar-week-view-header\n        [days]="days"\n        [locale]="locale"\n        [customTemplate]="headerTemplate"\n        (dayHeaderClicked)="dayHeaderClicked.emit($event)"\n        (eventDropped)="\n          eventDropped({ dropData: $event }, $event.newStart, true)\n        "\n        (dragEnter)="dateDragEnter($event.date)"\n      >\n      </mwl-calendar-week-view-header>\n      <div\n        class="cal-all-day-events"\n        #allDayEventsContainer\n        *ngIf="view.allDayEventRows.length > 0"\n        mwlDroppable\n        (dragEnter)="dragEnter(\'allDay\')"\n        (dragLeave)="dragLeave(\'allDay\')"\n      >\n        <div class="cal-day-columns">\n          <div\n            class="cal-time-label-column"\n            [ngTemplateOutlet]="allDayEventsLabelTemplate"\n          ></div>\n          <div\n            class="cal-day-column"\n            *ngFor="let day of days; trackBy: trackByWeekDayHeaderDate"\n            mwlDroppable\n            dragOverClass="cal-drag-over"\n            (drop)="eventDropped($event, day.date, true)"\n            (dragEnter)="dateDragEnter(day.date)"\n          ></div>\n        </div>\n        <div\n          *ngFor="let eventRow of view.allDayEventRows; trackBy: trackById"\n          #eventRowContainer\n          class="cal-events-row"\n        >\n          <div\n            *ngFor="\n              let allDayEvent of eventRow.row;\n              trackBy: trackByWeekAllDayEvent\n            "\n            #event\n            class="cal-event-container"\n            [class.cal-draggable]="\n              allDayEvent.event.draggable && allDayEventResizes.size === 0\n            "\n            [class.cal-starts-within-week]="!allDayEvent.startsBeforeWeek"\n            [class.cal-ends-within-week]="!allDayEvent.endsAfterWeek"\n            [ngClass]="allDayEvent.event?.cssClass"\n            [style.width.%]="(100 / days.length) * allDayEvent.span"\n            [style.marginLeft.%]="(100 / days.length) * allDayEvent.offset"\n            mwlResizable\n            [resizeSnapGrid]="{ left: dayColumnWidth, right: dayColumnWidth }"\n            [validateResize]="validateResize"\n            (resizeStart)="\n              allDayEventResizeStarted(eventRowContainer, allDayEvent, $event)\n            "\n            (resizing)="\n              allDayEventResizing(allDayEvent, $event, dayColumnWidth)\n            "\n            (resizeEnd)="allDayEventResizeEnded(allDayEvent)"\n            mwlDraggable\n            dragActiveClass="cal-drag-active"\n            [dropData]="{ event: allDayEvent.event, calendarId: calendarId }"\n            [dragAxis]="{\n              x: allDayEvent.event.draggable && allDayEventResizes.size === 0,\n              y:\n                !snapDraggedEvents &&\n                allDayEvent.event.draggable &&\n                allDayEventResizes.size === 0\n            }"\n            [dragSnapGrid]="snapDraggedEvents ? { x: dayColumnWidth } : {}"\n            [validateDrag]="validateDrag"\n            (dragStart)="dragStarted(eventRowContainer, event)"\n            (dragging)="allDayEventDragMove()"\n            (dragEnd)="dragEnded(allDayEvent, $event, dayColumnWidth)"\n          >\n            <div\n              class="cal-resize-handle cal-resize-handle-before-start"\n              *ngIf="\n                allDayEvent.event?.resizable?.beforeStart &&\n                !allDayEvent.startsBeforeWeek\n              "\n              mwlResizeHandle\n              [resizeEdges]="{ left: true }"\n            ></div>\n            <mwl-calendar-week-view-event\n              [locale]="locale"\n              [weekEvent]="allDayEvent"\n              [tooltipPlacement]="tooltipPlacement"\n              [tooltipTemplate]="tooltipTemplate"\n              [tooltipAppendToBody]="tooltipAppendToBody"\n              [tooltipDelay]="tooltipDelay"\n              [customTemplate]="eventTemplate"\n              [eventTitleTemplate]="eventTitleTemplate"\n              [eventActionsTemplate]="eventActionsTemplate"\n              [daysInWeek]="daysInWeek"\n              (eventClicked)="\n                eventClicked.emit({\n                  event: allDayEvent.event,\n                  sourceEvent: $event.sourceEvent\n                })\n              "\n            >\n            </mwl-calendar-week-view-event>\n            <div\n              class="cal-resize-handle cal-resize-handle-after-end"\n              *ngIf="\n                allDayEvent.event?.resizable?.afterEnd &&\n                !allDayEvent.endsAfterWeek\n              "\n              mwlResizeHandle\n              [resizeEdges]="{ right: true }"\n            ></div>\n          </div>\n        </div>\n      </div>\n      <div\n        class="cal-time-events"\n        mwlDroppable\n        (dragEnter)="dragEnter(\'time\')"\n        (dragLeave)="dragLeave(\'time\')"\n      >\n        <div\n          class="cal-time-label-column"\n          *ngIf="view.hourColumns.length > 0 && daysInWeek !== 1"\n        >\n          <div\n            *ngFor="\n              let hour of view.hourColumns[0].hours;\n              trackBy: trackByHour;\n              let odd = odd\n            "\n            class="cal-hour"\n            [class.cal-hour-odd]="odd"\n          >\n            <mwl-calendar-week-view-hour-segment\n              *ngFor="let segment of hour.segments; trackBy: trackByHourSegment"\n              [style.height.px]="hourSegmentHeight"\n              [segment]="segment"\n              [segmentHeight]="hourSegmentHeight"\n              [locale]="locale"\n              [customTemplate]="hourSegmentTemplate"\n              [isTimeLabel]="true"\n              [daysInWeek]="daysInWeek"\n            >\n            </mwl-calendar-week-view-hour-segment>\n          </div>\n        </div>\n        <div\n          class="cal-day-columns"\n          [class.cal-resize-active]="timeEventResizes.size > 0"\n          #dayColumns\n        >\n          <div\n            class="cal-day-column"\n            *ngFor="let column of view.hourColumns; trackBy: trackByHourColumn"\n          >\n            <mwl-calendar-week-view-current-time-marker\n              [columnDate]="column.date"\n              [dayStartHour]="dayStartHour"\n              [dayStartMinute]="dayStartMinute"\n              [dayEndHour]="dayEndHour"\n              [dayEndMinute]="dayEndMinute"\n              [hourSegments]="hourSegments"\n              [hourSegmentHeight]="hourSegmentHeight"\n              [customTemplate]="currentTimeMarkerTemplate"\n            ></mwl-calendar-week-view-current-time-marker>\n            <div class="cal-events-container">\n              <div\n                *ngFor="\n                  let timeEvent of column.events;\n                  trackBy: trackByWeekTimeEvent\n                "\n                #event\n                class="cal-event-container"\n                [class.cal-draggable]="\n                  timeEvent.event.draggable && timeEventResizes.size === 0\n                "\n                [class.cal-starts-within-day]="!timeEvent.startsBeforeDay"\n                [class.cal-ends-within-day]="!timeEvent.endsAfterDay"\n                [ngClass]="timeEvent.event.cssClass"\n                [hidden]="timeEvent.height === 0 && timeEvent.width === 0"\n                [style.top.px]="timeEvent.top"\n                [style.height.px]="timeEvent.height"\n                [style.left.%]="timeEvent.left"\n                [style.width.%]="timeEvent.width"\n                mwlResizable\n                [resizeSnapGrid]="{\n                  left: dayColumnWidth,\n                  right: dayColumnWidth,\n                  top: eventSnapSize || hourSegmentHeight,\n                  bottom: eventSnapSize || hourSegmentHeight\n                }"\n                [validateResize]="validateResize"\n                [allowNegativeResizes]="true"\n                (resizeStart)="\n                  timeEventResizeStarted(dayColumns, timeEvent, $event)\n                "\n                (resizing)="timeEventResizing(timeEvent, $event)"\n                (resizeEnd)="timeEventResizeEnded(timeEvent)"\n                mwlDraggable\n                dragActiveClass="cal-drag-active"\n                [dropData]="{ event: timeEvent.event, calendarId: calendarId }"\n                [dragAxis]="{\n                  x: timeEvent.event.draggable && timeEventResizes.size === 0,\n                  y: timeEvent.event.draggable && timeEventResizes.size === 0\n                }"\n                [dragSnapGrid]="\n                  snapDraggedEvents\n                    ? {\n                        x: dayColumnWidth,\n                        y: eventSnapSize || hourSegmentHeight\n                      }\n                    : {}\n                "\n                [ghostDragEnabled]="!snapDraggedEvents"\n                [validateDrag]="validateDrag"\n                (dragStart)="dragStarted(dayColumns, event, timeEvent)"\n                (dragging)="dragMove(timeEvent, $event)"\n                (dragEnd)="dragEnded(timeEvent, $event, dayColumnWidth, true)"\n              >\n                <div\n                  class="cal-resize-handle cal-resize-handle-before-start"\n                  *ngIf="\n                    timeEvent.event?.resizable?.beforeStart &&\n                    !timeEvent.startsBeforeDay\n                  "\n                  mwlResizeHandle\n                  [resizeEdges]="{\n                    left: true,\n                    top: true\n                  }"\n                ></div>\n                <mwl-calendar-week-view-event\n                  [locale]="locale"\n                  [weekEvent]="timeEvent"\n                  [tooltipPlacement]="tooltipPlacement"\n                  [tooltipTemplate]="tooltipTemplate"\n                  [tooltipAppendToBody]="tooltipAppendToBody"\n                  [tooltipDisabled]="dragActive || timeEventResizes.size > 0"\n                  [tooltipDelay]="tooltipDelay"\n                  [customTemplate]="eventTemplate"\n                  [eventTitleTemplate]="eventTitleTemplate"\n                  [eventActionsTemplate]="eventActionsTemplate"\n                  [column]="column"\n                  [daysInWeek]="daysInWeek"\n                  (eventClicked)="\n                    eventClicked.emit({\n                      event: timeEvent.event,\n                      sourceEvent: $event.sourceEvent\n                    })\n                  "\n                >\n                </mwl-calendar-week-view-event>\n                <div\n                  class="cal-resize-handle cal-resize-handle-after-end"\n                  *ngIf="\n                    timeEvent.event?.resizable?.afterEnd &&\n                    !timeEvent.endsAfterDay\n                  "\n                  mwlResizeHandle\n                  [resizeEdges]="{\n                    right: true,\n                    bottom: true\n                  }"\n                ></div>\n              </div>\n            </div>\n\n            <div\n              *ngFor="\n                let hour of column.hours;\n                trackBy: trackByHour;\n                let odd = odd\n              "\n              class="cal-hour"\n              [class.cal-hour-odd]="odd"\n            >\n              <mwl-calendar-week-view-hour-segment\n                *ngFor="\n                  let segment of hour.segments;\n                  trackBy: trackByHourSegment\n                "\n                [style.height.px]="hourSegmentHeight"\n                [segment]="segment"\n                [segmentHeight]="hourSegmentHeight"\n                [locale]="locale"\n                [customTemplate]="hourSegmentTemplate"\n                [daysInWeek]="daysInWeek"\n                (mwlClick)="\n                  hourSegmentClicked.emit({\n                    date: segment.date,\n                    sourceEvent: $event\n                  })\n                "\n                [clickListenerDisabled]="\n                  hourSegmentClicked.observers.length === 0\n                "\n                mwlDroppable\n                [dragOverClass]="\n                  !dragActive || !snapDraggedEvents ? \'cal-drag-over\' : null\n                "\n                dragActiveClass="cal-drag-active"\n                (drop)="eventDropped($event, segment.date, false)"\n                (dragEnter)="dateDragEnter(segment.date)"\n                [isTimeLabel]="daysInWeek === 1"\n              >\n              </mwl-calendar-week-view-hour-segment>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '}),u(2,t.Inject(t.LOCALE_ID)),v("design:paramtypes",[t.ChangeDetectorRef,Z,String,k])],n)}(),ye=function(){function e(){this.dayHeaderClicked=new t.EventEmitter,this.eventDropped=new t.EventEmitter,this.dragEnter=new t.EventEmitter,this.trackByWeekDayHeaderDate=S}return y([t.Input(),v("design:type",Array)],e.prototype,"days",void 0),y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"dayHeaderClicked",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"eventDropped",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"dragEnter",void 0),e=y([t.Component({selector:"mwl-calendar-week-view-header",template:'\n    <ng-template\n      #defaultTemplate\n      let-days="days"\n      let-locale="locale"\n      let-dayHeaderClicked="dayHeaderClicked"\n      let-eventDropped="eventDropped"\n      let-trackByWeekDayHeaderDate="trackByWeekDayHeaderDate"\n      let-dragEnter="dragEnter"\n    >\n      <div class="cal-day-headers" role="row">\n        <div\n          class="cal-header"\n          *ngFor="let day of days; trackBy: trackByWeekDayHeaderDate"\n          [class.cal-past]="day.isPast"\n          [class.cal-today]="day.isToday"\n          [class.cal-future]="day.isFuture"\n          [class.cal-weekend]="day.isWeekend"\n          [ngClass]="day.cssClass"\n          (mwlClick)="dayHeaderClicked.emit({ day: day, sourceEvent: $event })"\n          mwlDroppable\n          dragOverClass="cal-drag-over"\n          (drop)="\n            eventDropped.emit({\n              event: $event.dropData.event,\n              newStart: day.date\n            })\n          "\n          (dragEnter)="dragEnter.emit({ date: day.date })"\n          tabindex="0"\n          role="columnheader"\n        >\n          <b>{{ day.date | calendarDate: \'weekViewColumnHeader\':locale }}</b\n          ><br />\n          <span>{{\n            day.date | calendarDate: \'weekViewColumnSubHeader\':locale\n          }}</span>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        days: days,\n        locale: locale,\n        dayHeaderClicked: dayHeaderClicked,\n        eventDropped: eventDropped,\n        dragEnter: dragEnter,\n        trackByWeekDayHeaderDate: trackByWeekDayHeaderDate\n      }"\n    >\n    </ng-template>\n  '})],e)}(),ue=function(){function e(){this.eventClicked=new t.EventEmitter}return y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"weekEvent",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"tooltipPlacement",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"tooltipAppendToBody",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"tooltipDisabled",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"tooltipDelay",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventTitleTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventActionsTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"tooltipTemplate",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"column",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"daysInWeek",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"eventClicked",void 0),e=y([t.Component({selector:"mwl-calendar-week-view-event",template:'\n    <ng-template\n      #defaultTemplate\n      let-weekEvent="weekEvent"\n      let-tooltipPlacement="tooltipPlacement"\n      let-eventClicked="eventClicked"\n      let-tooltipTemplate="tooltipTemplate"\n      let-tooltipAppendToBody="tooltipAppendToBody"\n      let-tooltipDisabled="tooltipDisabled"\n      let-tooltipDelay="tooltipDelay"\n      let-column="column"\n      let-daysInWeek="daysInWeek"\n    >\n      <div\n        class="cal-event"\n        [ngStyle]="{\n          backgroundColor: weekEvent.event.color?.secondary,\n          borderColor: weekEvent.event.color?.primary\n        }"\n        [mwlCalendarTooltip]="\n          !tooltipDisabled\n            ? (weekEvent.event.title\n              | calendarEventTitle\n                : (daysInWeek === 1 ? \'dayTooltip\' : \'weekTooltip\')\n                : weekEvent.event)\n            : \'\'\n        "\n        [tooltipPlacement]="tooltipPlacement"\n        [tooltipEvent]="weekEvent.event"\n        [tooltipTemplate]="tooltipTemplate"\n        [tooltipAppendToBody]="tooltipAppendToBody"\n        [tooltipDelay]="tooltipDelay"\n        (mwlClick)="eventClicked.emit({ sourceEvent: $event })"\n        (mwlKeydownEnter)="eventClicked.emit({ sourceEvent: $event })"\n        tabindex="0"\n        role="application"\n        [attr.aria-label]="\n          { event: weekEvent.event, locale: locale }\n            | calendarA11y: \'eventDescription\'\n        "\n      >\n        <mwl-calendar-event-actions\n          [event]="weekEvent.event"\n          [customTemplate]="eventActionsTemplate"\n        >\n        </mwl-calendar-event-actions>\n        &ngsp;\n        <mwl-calendar-event-title\n          [event]="weekEvent.event"\n          [customTemplate]="eventTitleTemplate"\n          [view]="daysInWeek === 1 ? \'day\' : \'week\'"\n        >\n        </mwl-calendar-event-title>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        weekEvent: weekEvent,\n        tooltipPlacement: tooltipPlacement,\n        eventClicked: eventClicked,\n        tooltipTemplate: tooltipTemplate,\n        tooltipAppendToBody: tooltipAppendToBody,\n        tooltipDisabled: tooltipDisabled,\n        tooltipDelay: tooltipDelay,\n        column: column,\n        daysInWeek: daysInWeek\n      }"\n    >\n    </ng-template>\n  '})],e)}(),ve=function(){function e(){}return y([t.Input(),v("design:type",Object)],e.prototype,"segment",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"segmentHeight",void 0),y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"isTimeLabel",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"daysInWeek",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),e=y([t.Component({selector:"mwl-calendar-week-view-hour-segment",template:'\n    <ng-template\n      #defaultTemplate\n      let-segment="segment"\n      let-locale="locale"\n      let-segmentHeight="segmentHeight"\n      let-isTimeLabel="isTimeLabel"\n      let-daysInWeek="daysInWeek"\n    >\n      <div\n        [attr.aria-hidden]="\n          {}\n            | calendarA11y\n              : (daysInWeek === 1\n                  ? \'hideDayHourSegment\'\n                  : \'hideWeekHourSegment\')\n        "\n        class="cal-hour-segment"\n        [style.height.px]="segmentHeight"\n        [class.cal-hour-start]="segment.isStart"\n        [class.cal-after-hour-start]="!segment.isStart"\n        [ngClass]="segment.cssClass"\n      >\n        <div class="cal-time" *ngIf="isTimeLabel">\n          {{\n            segment.displayDate\n              | calendarDate\n                : (daysInWeek === 1 ? \'dayViewHour\' : \'weekViewHour\')\n                : locale\n          }}\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        segment: segment,\n        locale: locale,\n        segmentHeight: segmentHeight,\n        isTimeLabel: isTimeLabel,\n        daysInWeek: daysInWeek\n      }"\n    >\n    </ng-template>\n  '})],e)}(),me=function(){function e(e,t){var n=this;this.dateAdapter=e,this.zone=t,this.columnDate$=new o.BehaviorSubject(this.columnDate),this.marker$=this.zone.onStable.pipe(i.switchMap((function(){return o.interval(6e4)})),i.startWith(0),i.switchMapTo(this.columnDate$),i.map((function(e){var t=n.dateAdapter.setMinutes(n.dateAdapter.setHours(e,n.dayStartHour),n.dayStartMinute),a=n.dateAdapter.setMinutes(n.dateAdapter.setHours(e,n.dayEndHour),n.dayEndMinute),o=n.hourSegments*n.hourSegmentHeight/60,i=new Date;return{isVisible:n.dateAdapter.isSameDay(e,i)&&i>=t&&i<=a,top:n.dateAdapter.differenceInMinutes(i,t)*o}})))}return e.prototype.ngOnChanges=function(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)},e.ctorParameters=function(){return[{type:k},{type:t.NgZone}]},y([t.Input(),v("design:type",Date)],e.prototype,"columnDate",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayStartHour",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayStartMinute",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayEndHour",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayEndMinute",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"hourSegments",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"hourSegmentHeight",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"customTemplate",void 0),e=y([t.Component({selector:"mwl-calendar-week-view-current-time-marker",template:'\n    <ng-template\n      #defaultTemplate\n      let-columnDate="columnDate"\n      let-dayStartHour="dayStartHour"\n      let-dayStartMinute="dayStartMinute"\n      let-dayEndHour="dayEndHour"\n      let-dayEndMinute="dayEndMinute"\n      let-isVisible="isVisible"\n      let-topPx="topPx"\n    >\n      <div\n        class="cal-current-time-marker"\n        *ngIf="isVisible"\n        [style.top.px]="topPx"\n      ></div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{\n        columnDate: columnDate,\n        dayStartHour: dayStartHour,\n        dayStartMinute: dayStartMinute,\n        dayEndHour: dayEndHour,\n        dayEndMinute: dayEndMinute,\n        isVisible: (marker$ | async)?.isVisible,\n        topPx: (marker$ | async)?.top\n      }"\n    >\n    </ng-template>\n  '}),v("design:paramtypes",[k,t.NgZone])],e)}(),ge=function(){function e(){}return e=y([t.NgModule({imports:[n.CommonModule,s.ResizableModule,l.DragAndDropModule,ne],declarations:[ce,ye,ue,ve,me],exports:[s.ResizableModule,l.DragAndDropModule,ce,ye,ue,ve,me]})],e)}(),he=function(){function e(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new t.EventEmitter,this.hourSegmentClicked=new t.EventEmitter,this.eventTimesChanged=new t.EventEmitter,this.beforeViewRender=new t.EventEmitter}return y([t.Input(),v("design:type",Date)],e.prototype,"viewDate",void 0),y([t.Input(),v("design:type",Array)],e.prototype,"events",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"hourSegments",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"hourSegmentHeight",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayStartHour",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayStartMinute",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayEndHour",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"dayEndMinute",void 0),y([t.Input(),v("design:type",o.Subject)],e.prototype,"refresh",void 0),y([t.Input(),v("design:type",String)],e.prototype,"locale",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"eventSnapSize",void 0),y([t.Input(),v("design:type",Object)],e.prototype,"tooltipPlacement",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"tooltipTemplate",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"tooltipAppendToBody",void 0),y([t.Input(),v("design:type",Number)],e.prototype,"tooltipDelay",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"hourSegmentTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventTitleTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"eventActionsTemplate",void 0),y([t.Input(),v("design:type",Boolean)],e.prototype,"snapDraggedEvents",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"allDayEventsLabelTemplate",void 0),y([t.Input(),v("design:type",t.TemplateRef)],e.prototype,"currentTimeMarkerTemplate",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"eventClicked",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"hourSegmentClicked",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"eventTimesChanged",void 0),y([t.Output(),v("design:type",Object)],e.prototype,"beforeViewRender",void 0),e=y([t.Component({selector:"mwl-calendar-day-view",template:'\n    <mwl-calendar-week-view\n      class="cal-day-view"\n      [daysInWeek]="1"\n      [viewDate]="viewDate"\n      [events]="events"\n      [hourSegments]="hourSegments"\n      [hourSegmentHeight]="hourSegmentHeight"\n      [dayStartHour]="dayStartHour"\n      [dayStartMinute]="dayStartMinute"\n      [dayEndHour]="dayEndHour"\n      [dayEndMinute]="dayEndMinute"\n      [refresh]="refresh"\n      [locale]="locale"\n      [eventSnapSize]="eventSnapSize"\n      [tooltipPlacement]="tooltipPlacement"\n      [tooltipTemplate]="tooltipTemplate"\n      [tooltipAppendToBody]="tooltipAppendToBody"\n      [tooltipDelay]="tooltipDelay"\n      [hourSegmentTemplate]="hourSegmentTemplate"\n      [eventTemplate]="eventTemplate"\n      [eventTitleTemplate]="eventTitleTemplate"\n      [eventActionsTemplate]="eventActionsTemplate"\n      [snapDraggedEvents]="snapDraggedEvents"\n      [allDayEventsLabelTemplate]="allDayEventsLabelTemplate"\n      [currentTimeMarkerTemplate]="currentTimeMarkerTemplate"\n      (eventClicked)="eventClicked.emit($event)"\n      (hourSegmentClicked)="hourSegmentClicked.emit($event)"\n      (eventTimesChanged)="eventTimesChanged.emit($event)"\n      (beforeViewRender)="beforeViewRender.emit($event)"\n    ></mwl-calendar-week-view>\n  '})],e)}(),fe=function(){function e(){}return e=y([t.NgModule({imports:[n.CommonModule,ne,ge],declarations:[he],exports:[he]})],e)}(),De=function(){function e(){}var n;return n=e,e.forRoot=function(e,t){return void 0===t&&(t={}),{ngModule:n,providers:[e,t.eventTitleFormatter||U,t.dateFormatter||Y,t.utils||Z,t.a11y||J]}},e=n=y([t.NgModule({imports:[ne,de,ge,fe],exports:[ne,de,ge,fe]})],e)}();Object.defineProperty(e,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return r.DAYS_OF_WEEK}}),e.CalendarA11y=J,e.CalendarAngularDateFormatter=$,e.CalendarCommonModule=ne,e.CalendarDateFormatter=Y,e.CalendarDayModule=fe,e.CalendarDayViewComponent=he,e.CalendarEventTitleFormatter=U,e.CalendarModule=De,e.CalendarMomentDateFormatter=ee,e.CalendarMonthModule=de,e.CalendarMonthViewComponent=ae,e.CalendarNativeDateFormatter=te,e.CalendarUtils=Z,e.CalendarWeekModule=ge,e.CalendarWeekViewComponent=ce,e.DateAdapter=k,e.MOMENT=X,e.collapseAnimation=re,e.getWeekViewPeriod=j,e.a=le,e.b=f,e.c=D,e.d=w,e.e=E,e.f=F,e.g=N,e.h=L,e.i=_,e.j=q,e.k=Q,e.l=K,e.m=G,e.n=ie,e.o=oe,e.p=ye,e.q=ue,e.r=ve,e.s=me,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-calendar.umd.min.js.map